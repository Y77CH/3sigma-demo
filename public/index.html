<!DOCTYPE html>
<html>
   <head>
      <title>Vue Modern Dropdowns</title>
      <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
      <style>
         body {
         font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
         background-color: #f0f0f0;
         display: flex;
         justify-content: center;
         align-items: center;
         height: 100vh;
         margin: 0;
         }
         #app {
         background-color: white;
         padding: 40px;
         border-radius: 15px;
         box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
         width: 80%;
         }
         label {
         display: block;
         font-weight: 600;
         margin-bottom: 10px;
         color: #333;
         }
         select,
         input[type="text"] {
         width: calc(100% - 20px);
         padding: 10px;
         margin-bottom: 20px;
         border-radius: 5px;
         border: 1px solid #ccc;
         font-size: 16px;
         transition: border-color 0.3s;
         }
         select:hover,
         input[type="text"]:hover {
         border-color: #888;
         }
         select:focus,
         input[type="text"]:focus {
         outline: none;
         border-color: #007bff;
         box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
         }
         .divider {
         height: 1px;
         background-color: #ddd;
         margin: 20px 0;
         }
         button {
         padding: 10px 20px;
         border: none;
         border-radius: 5px;
         background-color: #28a745; /* Bootstrap green */
         color: white;
         font-size: 16px;
         cursor: pointer;
         transition: background-color 0.3s;
         }
         button:hover {
         background-color: #218838; /* A slightly darker green */
         }
         button:focus {
         outline: none;
         box-shadow: 0 0 0 2px rgba(40, 167, 69, 0.5); /* Green shadow */
         }
         .button-container {
         display: flex;
         flex-direction: column; /* Aligns buttons vertically */
         }
         .grade-button {
         background-color: #f8f9fa; /* Light grey background */
         color: #28a745; /* Text color */
         margin-bottom: 10px; /* Space between buttons */
         transition: background-color 0.3s; /* Smooth transition for hover effect */
         }
         .grade-button:hover {
         background-color: #28a745; /* Green background on hover */
         color: white; /* White text on hover */
         }
         .selected-grade {
         background-color: #28a745; /* Green background */
         color: white; /* White text */
         }
         .horizontal-section {
         display: flex; /* Aligns children horizontally */
         justify-content: space-between; /* Distributes space between items */
         align-items: flex-start; /* Aligns items to the top */
         }
         .question-section,
         .student-answer-section,
         .grading-section {
         flex: 1; /* Each section takes equal width */
         margin-right: 10px; /* Adds some space between the sections */
         }
         /* Remove the margin for the last element */
         .horizontal-section > div:last-child {
         margin-right: 0;
         }
         .button-container {
         display: flex;
         flex-direction: column; /* Aligns buttons vertically */
         justify-content: flex-start; /* Aligns items to the top */
         }
         /* Adjust the button width so they don't stretch too much */
         .grade-button {
         width: auto; /* Auto width based on content */
         margin-bottom: 5px; /* Space between buttons */
         }
         .labels-section {
         flex: 1;
         margin-right: 20px;
         }
         .tags-container {
         display: flex;
         flex-wrap: wrap;
         gap: 5px;
         margin-top: 10px;
         }
         /* .tag {
         padding: 5px 10px;
         background-color: #007bff;
         color: white;
         border-radius: 5px;
         cursor: pointer;
         } */
         .input-tag-container {
         display: flex;
         flex-wrap: wrap;
         align-items: center;
         gap: 5px;
         border: 1px solid #ccc;
         padding: 5px;
         border-radius: 5px;
         }
         .selected-tag {
         padding: 5px 10px;
         background-color: #28a745; /* Green background */
         color: white;
         border-radius: 5px;
         cursor: pointer;
         }
         .question-number-section {
         margin-right: 20px; /* Adjust the space between this and the next column as needed */
         }
         #questionNumber {
         font-size: 16px; /* Match the font size with other inputs if needed */
         /* Removed any border or background styling */
         }
      </style>
   </head>
   <body>
      <div id="app">
      <!-- Dropdown 1 -->
      <div>
         <label for="dropdown1">Choose an option:</label>
         <select
            id="dropdown1"
            v-model="selectedOption1"
            @change="updateOptions2"
            >
            <option v-for="(value, key) in relations" :value="key">
               {{ key }}
            </option>
         </select>
      </div>
      <!-- Dropdown 2 -->
      <div>
         <label for="dropdown2">Choose related option:</label>
         <select id="dropdown2" v-model="selectedOption2">
            <option v-for="option in options2" :value="option">
               {{ option }}
            </option>
         </select>
      </div>
      <div class="divider"></div>
      <div v-for="(set, index) in sets" :key="index" class="horizontal-section">
         <!-- Question Number Section -->
         <div class="question-number-section">
            <label>No.</label>
            <p>{{ set.no }}</p>
         </div>
         <!-- Labels Section -->
         <div class="labels-section">
            <label for="labelsInput">Labels</label>
            <div class="input-tag-container">
               <span class="selected-tag" v-for="tag in set.selectedTags" @click="removeTag(set, tag)">
               {{ tag }}
               </span>
               <input type="text" v-model="set.labelSearch" @input="filterTags(set)" placeholder="Search and select tags">
            </div>
            <div class="tags-container">
               <span class="tag" v-for="tag in set.filteredTags" @click="addTag(set, tag)">
               {{ tag }}
               </span>
            </div>
         </div>
         <!-- Grading Section -->
         <div class="grading-section">
            <label>Grading</label>
            <div class="button-container">
               <button type="button" class="grade-button" :class="{'selected-grade': set.selectedGrade === 'correct'}" @click="selectGrade(set, 'correct')">Correctly answered +2</button>
               <button type="button" class="grade-button" :class="{'selected-grade': set.selectedGrade === 'partial'}" @click="selectGrade(set, 'partial')">Correct answer but mistakes in steps +1</button>
               <button type="button" class="grade-button" :class="{'selected-grade': set.selectedGrade === 'incorrect'}" @click="selectGrade(set, 'incorrect')">Completely incorrect +0</button>
            </div>
         </div>
         <button @click="addSet">Add New Row</button>
      </div>
      <script>
         new Vue({
           el: "#app",
           data: {
             selectedOption1: "Country",
             selectedOption2: "Exam",
             textEntry1: "",
             textEntry2: "",
             relations: {
               US: ["TOEFL", "AP", "SAT"],
               UK: ["ALEVEL", "IELTS"],
             },
             options2: [],
             selectedGrade: "",
             labelSearch: "",
             allTags: ["Macro", "Micro"],
             selectedTags: [],
             filteredTags: [],
             selectedMenuA: '',
             selectedMenuB: '',
             sets: [
               { 
                 no: 1, 
                 selectedTags: [], 
                 selectedGrade: ''
               }
             ],
           },
           watch: {
             selectedOption1: function (newVal) {
               // Update the options for the second dropdown
               this.options2 = this.relations[newVal] || [];
               // Reset selectedOption2 to its default value whenever selectedOption1 changes
               this.selectedOption2 = "";
             },
             labelSearch: function(newVal) {
               // When the input is cleared, also clear the filtered tags
               if (newVal === '') {
                   this.filteredTags = [];
               } else {
                   this.filterTags();
               }
           }
           },
           created: function () {
             // Initialize filteredTags with all tags initially
             this.filteredTags = this.allTags;
           },
           methods: {
             submitForm: function () {
               // Handle the submission logic here
               console.log("Option 1:", this.selectedOption1);
               console.log("Option 2:", this.selectedOption2);
               console.log("Text Entry 1:", this.textEntry1);
               console.log("Text Entry 2:", this.textEntry2);
               // Add your form submission logic here
             },
             selectGrade: function (set, grade) {
         set.selectedGrade = grade;
         },
         addTag: function(set, tag) {
         if (!set.selectedTags.includes(tag)) {
           set.selectedTags.unshift(tag);
         }
         },
         removeTag: function(set, tag) {
         const index = set.selectedTags.indexOf(tag);
         if (index > -1) {
           set.selectedTags.splice(index, 1);
         }
         },
         filterTags: function(set) {
         if (set.labelSearch === '') {
           set.filteredTags = [];
         } else {
           set.filteredTags = this.allTags.filter(tag => tag.toLowerCase().includes(set.labelSearch.toLowerCase()) && !set.selectedTags.includes(tag));
         }
         },
           addSet: function() {
         const nextNo = this.sets.length + 1;
         this.sets.push({ no: nextNo, selectedTags: [], selectedGrade: '' });
         },
           },
         });
      </script>
   </body>
</html>